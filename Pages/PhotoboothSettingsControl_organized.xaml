<UserControl x:Class="Photobooth.Pages.PhotoboothSettingsControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Photobooth.Pages"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="800"
             Background="{StaticResource SurfaceBackgroundBrush}">
    
    <UserControl.Resources>
        <!-- Converters -->
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        
        <!-- Modern Settings Section Style -->
        <Style x:Key="SettingsSectionStyle" TargetType="Expander">
            <Setter Property="Background" Value="{StaticResource SurfaceSecondaryBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource SurfaceBorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Margin" Value="0,8,0,8"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Foreground" Value="{StaticResource SurfaceTextPrimaryBrush}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Expander">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                
                                <!-- Header -->
                                <ToggleButton Grid.Row="0"
                                              IsChecked="{Binding IsExpanded, RelativeSource={RelativeSource TemplatedParent}}"
                                              Background="Transparent"
                                              BorderThickness="0"
                                              Padding="15,12"
                                              HorizontalContentAlignment="Left">
                                    <ToggleButton.Template>
                                        <ControlTemplate TargetType="ToggleButton">
                                            <Border Background="{TemplateBinding Background}"
                                                    Padding="{TemplateBinding Padding}">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    
                                                    <ContentPresenter Grid.Column="0" 
                                                                      Content="{Binding Header, RelativeSource={RelativeSource AncestorType=Expander}}"
                                                                      VerticalAlignment="Center"/>
                                                    
                                                    <TextBlock Grid.Column="1"
                                                               FontFamily="{StaticResource SegoeMDL2}"
                                                               Text="{StaticResource MDL2_Down}"
                                                               FontSize="16"
                                                               Foreground="{StaticResource SurfaceTextSecondaryBrush}"
                                                               VerticalAlignment="Center"
                                                               RenderTransformOrigin="0.5,0.5">
                                                        <TextBlock.RenderTransform>
                                                            <RotateTransform x:Name="ArrowRotate" Angle="0"/>
                                                        </TextBlock.RenderTransform>
                                                    </TextBlock>
                                                </Grid>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="{StaticResource SurfaceButtonHoverBrush}"/>
                                                </Trigger>
                                                <Trigger Property="IsChecked" Value="True">
                                                    <Setter TargetName="ArrowRotate" Property="Angle" Value="180"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </ToggleButton.Template>
                                </ToggleButton>
                                
                                <!-- Content -->
                                <ContentPresenter Grid.Row="1"
                                                  Visibility="{Binding IsExpanded, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BoolToVisibilityConverter}}"
                                                  Margin="15,0,15,15"/>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Section Header Style -->
        <Style x:Key="SectionHeaderStyle" TargetType="StackPanel">
            <Setter Property="Orientation" Value="Horizontal"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>
        
        <!-- Settings Group Style -->
        <Style x:Key="SettingsGroupStyle" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource SurfacePanelBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource SurfaceBorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="15"/>
            <Setter Property="Margin" Value="0,8,0,8"/>
        </Style>
        
        <!-- Setting Item Style -->
        <Style x:Key="SettingItemStyle" TargetType="StackPanel">
            <Setter Property="Margin" Value="0,8,0,8"/>
        </Style>
        
        <!-- Settings CheckBox Style -->
        <Style x:Key="SettingsCheckBoxStyle" TargetType="CheckBox">
            <Setter Property="Foreground" Value="{StaticResource SurfaceTextPrimaryBrush}"/>
            <Setter Property="Margin" Value="0,4,0,4"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
        
        <!-- Settings Slider Style -->
        <Style x:Key="SettingsSliderStyle" TargetType="Slider">
            <Setter Property="Margin" Value="0,4,8,4"/>
            <Setter Property="Height" Value="24"/>
        </Style>
        
        <!-- Settings TextBox Style -->
        <Style x:Key="SettingsTextBoxStyle" TargetType="TextBox">
            <Setter Property="Background" Value="{StaticResource SurfaceInputBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource SurfaceTextPrimaryBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource SurfaceBorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Margin" Value="0,4,0,4"/>
        </Style>
        
        <!-- Settings Label Style -->
        <Style x:Key="SettingsLabelStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource SurfaceTextPrimaryBrush}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Margin" Value="0,4,0,4"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        
        <!-- Subtitle Style -->
        <Style x:Key="SettingsSubtitleStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource SurfaceTextSecondaryBrush}"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Margin" Value="0,2,0,8"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
        </Style>
    </UserControl.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <Border Grid.Row="0" Background="{StaticResource SurfacePrimaryBrush}" Padding="20">
            <StackPanel>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock FontFamily="{StaticResource SegoeMDL2}" Text="{StaticResource MDL2_Settings}" 
                               FontSize="32" Foreground="{StaticResource SurfaceTextPrimaryBrush}" 
                               VerticalAlignment="Center" Margin="0,0,15,0"/>
                    <TextBlock Text="Photobooth Settings" 
                               FontSize="28" FontWeight="Bold" 
                               Foreground="{StaticResource SurfaceTextPrimaryBrush}" 
                               VerticalAlignment="Center"/>
                </StackPanel>
                <TextBlock Text="Configure your photobooth experience" 
                           Style="{StaticResource SettingsSubtitleStyle}"
                           HorizontalAlignment="Center" 
                           FontSize="14"/>
            </StackPanel>
        </Border>
        
        <!-- Settings Content -->
        <ScrollViewer Grid.Row="1" 
                      VerticalScrollBarVisibility="Auto" 
                      HorizontalScrollBarVisibility="Disabled"
                      Padding="20">
            <StackPanel>
                
                <!-- ========== CAPTURE SETTINGS ========== -->
                <Expander Style="{StaticResource SettingsSectionStyle}" IsExpanded="True">
                    <Expander.Header>
                        <StackPanel Style="{StaticResource SectionHeaderStyle}">
                            <TextBlock FontFamily="{StaticResource SegoeMDL2}" Text="{StaticResource MDL2_Camera}" 
                                       FontSize="20" Foreground="#4CAF50" Margin="0,0,12,0" VerticalAlignment="Center"/>
                            <TextBlock Text="Capture Settings" FontSize="18" FontWeight="SemiBold" 
                                       Foreground="{StaticResource SurfaceTextPrimaryBrush}" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Expander.Header>
                    
                    <StackPanel>
                        <!-- Countdown Timer -->
                        <Border Style="{StaticResource SettingsGroupStyle}">
                            <StackPanel>
                                <TextBlock Text="Countdown Timer" FontWeight="SemiBold" FontSize="16" 
                                           Style="{StaticResource SettingsLabelStyle}"/>
                                <TextBlock Text="Time before taking each photo" 
                                           Style="{StaticResource SettingsSubtitleStyle}"/>
                                
                                <StackPanel Style="{StaticResource SettingItemStyle}" Orientation="Horizontal">
                                    <Slider x:Name="countdownSlider" 
                                            Minimum="1" Maximum="10" Value="5" 
                                            TickPlacement="BottomRight" TickFrequency="1" 
                                            IsSnapToTickEnabled="True" Width="200"
                                            Style="{StaticResource SettingsSliderStyle}"/>
                                    <TextBlock x:Name="countdownValueText" Text="5 seconds" 
                                               Style="{StaticResource SettingsLabelStyle}" Margin="12,0,0,0"/>
                                </StackPanel>
                                
                                <CheckBox x:Name="showCountdownCheckBox" 
                                          Content="Show countdown text at bottom of screen"
                                          IsChecked="True" Style="{StaticResource SettingsCheckBoxStyle}"/>
                            </StackPanel>
                        </Border>
                        
                        <!-- Photo Display -->
                        <Border Style="{StaticResource SettingsGroupStyle}">
                            <StackPanel>
                                <TextBlock Text="Photo Display Duration" FontWeight="SemiBold" FontSize="16" 
                                           Style="{StaticResource SettingsLabelStyle}"/>
                                <TextBlock Text="How long to show each photo after capture" 
                                           Style="{StaticResource SettingsSubtitleStyle}"/>
                                
                                <StackPanel Style="{StaticResource SettingItemStyle}" Orientation="Horizontal">
                                    <Slider x:Name="photoDisplayDurationSlider" 
                                            Minimum="1" Maximum="10" Value="4" 
                                            TickPlacement="BottomRight" TickFrequency="1" 
                                            IsSnapToTickEnabled="True" Width="200"
                                            Style="{StaticResource SettingsSliderStyle}"/>
                                    <TextBlock x:Name="photoDisplayDurationValueText" Text="4 seconds" 
                                               Style="{StaticResource SettingsLabelStyle}" Margin="12,0,0,0"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                        
                        <!-- Capture Modes -->
                        <Border Style="{StaticResource SettingsGroupStyle}">
                            <StackPanel>
                                <TextBlock Text="Capture Modes" FontWeight="SemiBold" FontSize="16" 
                                           Style="{StaticResource SettingsLabelStyle}"/>
                                
                                <CheckBox x:Name="photographerModeCheckBox" 
                                          Content="Photographer Mode (manual trigger for each photo)"
                                          IsChecked="False" Style="{StaticResource SettingsCheckBoxStyle}"/>
                                          
                                <CheckBox x:Name="showSessionPromptsCheckBox" 
                                          Content="Show session status messages"
                                          IsChecked="False" Style="{StaticResource SettingsCheckBoxStyle}"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Expander>
                
                <!-- ========== FILE & STORAGE SETTINGS ========== -->
                <Expander Style="{StaticResource SettingsSectionStyle}" IsExpanded="False">
                    <Expander.Header>
                        <StackPanel Style="{StaticResource SectionHeaderStyle}">
                            <TextBlock FontFamily="{StaticResource SegoeMDL2}" Text="{StaticResource MDL2_Save}" 
                                       FontSize="20" Foreground="#2196F3" Margin="0,0,12,0" VerticalAlignment="Center"/>
                            <TextBlock Text="File & Storage" FontSize="18" FontWeight="SemiBold" 
                                       Foreground="{StaticResource SurfaceTextPrimaryBrush}" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Expander.Header>
                    
                    <StackPanel>
                        <!-- Save Location -->
                        <Border Style="{StaticResource SettingsGroupStyle}">
                            <StackPanel>
                                <TextBlock Text="Photos Save Location" FontWeight="SemiBold" FontSize="16" 
                                           Style="{StaticResource SettingsLabelStyle}"/>
                                <TextBlock Text="Where photos will be stored on your computer" 
                                           Style="{StaticResource SettingsSubtitleStyle}"/>
                                
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBox x:Name="saveLocationTextBox" Grid.Column="0"
                                             Text="C:\PhotoboothPhotos" 
                                             Style="{StaticResource SettingsTextBoxStyle}"/>
                                    <Button Grid.Column="1" Content="Browse..." 
                                            Margin="8,4,0,4" Padding="12,6"/>
                                </Grid>
                            </StackPanel>
                        </Border>
                        
                        <!-- Filename Format -->
                        <Border Style="{StaticResource SettingsGroupStyle}">
                            <StackPanel>
                                <TextBlock Text="Photo Filename Format" FontWeight="SemiBold" FontSize="16" 
                                           Style="{StaticResource SettingsLabelStyle}"/>
                                <TextBlock Text="Template for naming saved photos" 
                                           Style="{StaticResource SettingsSubtitleStyle}"/>
                                
                                <TextBox x:Name="filenameFormatTextBox" 
                                         Text="Photo_{DateTime:yyyyMMdd_HHmmss}_{Session}" 
                                         Style="{StaticResource SettingsTextBoxStyle}"/>
                                <TextBlock Text="Available tokens: {DateTime}, {Session}, {Counter}" 
                                           Style="{StaticResource SettingsSubtitleStyle}"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Expander>
                
                <!-- ========== CAMERA & LIVE VIEW ========== -->
                <Expander Style="{StaticResource SettingsSectionStyle}" IsExpanded="False">
                    <Expander.Header>
                        <StackPanel Style="{StaticResource SectionHeaderStyle}">
                            <TextBlock FontFamily="{StaticResource SegoeMDL2}" Text="{StaticResource MDL2_Video}" 
                                       FontSize="20" Foreground="#FF9800" Margin="0,0,12,0" VerticalAlignment="Center"/>
                            <TextBlock Text="Camera & Live View" FontSize="18" FontWeight="SemiBold" 
                                       Foreground="{StaticResource SurfaceTextPrimaryBrush}" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Expander.Header>
                    
                    <StackPanel>
                        <!-- Live View Settings -->
                        <Border Style="{StaticResource SettingsGroupStyle}">
                            <StackPanel>
                                <TextBlock Text="Live View Frame Rate" FontWeight="SemiBold" FontSize="16" 
                                           Style="{StaticResource SettingsLabelStyle}"/>
                                <TextBlock Text="Higher FPS provides smoother preview but uses more CPU" 
                                           Style="{StaticResource SettingsSubtitleStyle}"/>
                                
                                <StackPanel Style="{StaticResource SettingItemStyle}" Orientation="Horizontal">
                                    <Slider x:Name="liveViewFpsSlider" 
                                            Minimum="5" Maximum="30" Value="15" 
                                            TickPlacement="BottomRight" TickFrequency="5" 
                                            IsSnapToTickEnabled="True" Width="200"
                                            Style="{StaticResource SettingsSliderStyle}"/>
                                    <TextBlock x:Name="liveViewFpsValueText" Text="15 FPS" 
                                               Style="{StaticResource SettingsLabelStyle}" Margin="12,0,0,0"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                        
                        <!-- Auto-Clear Timeout -->
                        <Border Style="{StaticResource SettingsGroupStyle}">
                            <StackPanel>
                                <TextBlock Text="Auto-Clear Timeout" FontWeight="SemiBold" FontSize="16" 
                                           Style="{StaticResource SettingsLabelStyle}"/>
                                <TextBlock Text="Automatically return to start screen after inactivity" 
                                           Style="{StaticResource SettingsSubtitleStyle}"/>
                                
                                <CheckBox x:Name="enableAutoClearCheckBox" 
                                          Content="Enable auto-clear timeout"
                                          IsChecked="True" Style="{StaticResource SettingsCheckBoxStyle}"/>
                                
                                <StackPanel Style="{StaticResource SettingItemStyle}" Orientation="Horizontal">
                                    <Slider x:Name="autoClearTimeoutSlider" 
                                            Minimum="10" Maximum="120" Value="30" 
                                            TickPlacement="BottomRight" TickFrequency="10" 
                                            IsSnapToTickEnabled="True" Width="200"
                                            Style="{StaticResource SettingsSliderStyle}"/>
                                    <TextBlock x:Name="autoClearTimeoutValueText" Text="30 seconds" 
                                               Style="{StaticResource SettingsLabelStyle}" Margin="12,0,0,0"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                        
                        <!-- Retake Settings -->
                        <Border Style="{StaticResource SettingsGroupStyle}">
                            <StackPanel>
                                <TextBlock Text="Retake Review Timeout" FontWeight="SemiBold" FontSize="16" 
                                           Style="{StaticResource SettingsLabelStyle}"/>
                                <TextBlock Text="Time allowed to review and retake photos" 
                                           Style="{StaticResource SettingsSubtitleStyle}"/>
                                
                                <CheckBox x:Name="enableRetakeReviewCheckBox" 
                                          Content="Allow photo retakes during session"
                                          IsChecked="False" Style="{StaticResource SettingsCheckBoxStyle}"/>
                                
                                <StackPanel Style="{StaticResource SettingItemStyle}" Orientation="Horizontal">
                                    <Slider x:Name="retakeTimeoutSlider" 
                                            Minimum="5" Maximum="60" Value="15" 
                                            TickPlacement="BottomRight" TickFrequency="5" 
                                            IsSnapToTickEnabled="True" Width="200"
                                            Style="{StaticResource SettingsSliderStyle}"/>
                                    <TextBlock x:Name="retakeTimeoutValueText" Text="15 seconds" 
                                               Style="{StaticResource SettingsLabelStyle}" Margin="12,0,0,0"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Expander>
                
                <!-- ========== FILTERS & EFFECTS ========== -->
                <Expander Style="{StaticResource SettingsSectionStyle}" IsExpanded="False">
                    <Expander.Header>
                        <StackPanel Style="{StaticResource SectionHeaderStyle}">
                            <TextBlock FontFamily="{StaticResource SegoeMDL2}" Text="{StaticResource MDL2_Picture}" 
                                       FontSize="20" Foreground="#9C27B0" Margin="0,0,12,0" VerticalAlignment="Center"/>
                            <TextBlock Text="Filters & Effects" FontSize="18" FontWeight="SemiBold" 
                                       Foreground="{StaticResource SurfaceTextPrimaryBrush}" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Expander.Header>
                    
                    <StackPanel>
                        <!-- Default Filter -->
                        <Border Style="{StaticResource SettingsGroupStyle}">
                            <StackPanel>
                                <TextBlock Text="Default Photo Filter" FontWeight="SemiBold" FontSize="16" 
                                           Style="{StaticResource SettingsLabelStyle}"/>
                                <TextBlock Text="Filter applied to all photos by default" 
                                           Style="{StaticResource SettingsSubtitleStyle}"/>
                                
                                <CheckBox x:Name="enableFiltersCheckBox" 
                                          Content="Enable photo filters"
                                          IsChecked="True" Style="{StaticResource SettingsCheckBoxStyle}"/>
                                
                                <ComboBox x:Name="defaultFilterComboBox" Margin="0,8,0,8" Height="32">
                                    <ComboBoxItem Content="None" IsSelected="True"/>
                                    <ComboBoxItem Content="Vintage"/>
                                    <ComboBoxItem Content="Black & White"/>
                                    <ComboBoxItem Content="Sepia"/>
                                    <ComboBoxItem Content="Warm"/>
                                    <ComboBoxItem Content="Cool"/>
                                </ComboBox>
                                
                                <TextBlock Text="Filter Intensity" FontWeight="SemiBold" FontSize="14" 
                                           Style="{StaticResource SettingsLabelStyle}" Margin="0,12,0,4"/>
                                
                                <StackPanel Style="{StaticResource SettingItemStyle}" Orientation="Horizontal">
                                    <Slider x:Name="filterIntensitySlider" 
                                            Minimum="0" Maximum="100" Value="50" 
                                            TickPlacement="BottomRight" TickFrequency="10" 
                                            IsSnapToTickEnabled="True" Width="200"
                                            Style="{StaticResource SettingsSliderStyle}"/>
                                    <TextBlock x:Name="filterIntensityValueText" Text="50%" 
                                               Style="{StaticResource SettingsLabelStyle}" Margin="12,0,0,0"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                        
                        <!-- Available Filters -->
                        <Border Style="{StaticResource SettingsGroupStyle}">
                            <StackPanel>
                                <TextBlock Text="Available Filters" FontWeight="SemiBold" FontSize="16" 
                                           Style="{StaticResource SettingsLabelStyle}"/>
                                <TextBlock Text="Select which filters users can choose from" 
                                           Style="{StaticResource SettingsSubtitleStyle}"/>
                                
                                <CheckBox Content="Vintage" IsChecked="True" Style="{StaticResource SettingsCheckBoxStyle}"/>
                                <CheckBox Content="Black & White" IsChecked="True" Style="{StaticResource SettingsCheckBoxStyle}"/>
                                <CheckBox Content="Sepia" IsChecked="True" Style="{StaticResource SettingsCheckBoxStyle}"/>
                                <CheckBox Content="Warm" IsChecked="True" Style="{StaticResource SettingsCheckBoxStyle}"/>
                                <CheckBox Content="Cool" IsChecked="True" Style="{StaticResource SettingsCheckBoxStyle}"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Expander>
                
                <!-- ========== GIF & ANIMATION ========== -->
                <Expander Style="{StaticResource SettingsSectionStyle}" IsExpanded="False">
                    <Expander.Header>
                        <StackPanel Style="{StaticResource SectionHeaderStyle}">
                            <TextBlock Text="🎬" FontSize="20" Foreground="#E91E63" 
                                       Margin="0,0,12,0" VerticalAlignment="Center"/>
                            <TextBlock Text="GIF & Animation" FontSize="18" FontWeight="SemiBold" 
                                       Foreground="{StaticResource SurfaceTextPrimaryBrush}" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Expander.Header>
                    
                    <StackPanel>
                        <Border Style="{StaticResource SettingsGroupStyle}">
                            <StackPanel>
                                <TextBlock Text="GIF Animation Settings" FontWeight="SemiBold" FontSize="16" 
                                           Style="{StaticResource SettingsLabelStyle}"/>
                                
                                <CheckBox x:Name="enableGifCreationCheckBox" 
                                          Content="Enable GIF creation from photo sessions"
                                          IsChecked="True" Style="{StaticResource SettingsCheckBoxStyle}"/>
                                
                                <TextBlock Text="GIF Frame Delay (milliseconds)" FontWeight="SemiBold" FontSize="14" 
                                           Style="{StaticResource SettingsLabelStyle}" Margin="0,12,0,4"/>
                                
                                <StackPanel Style="{StaticResource SettingItemStyle}" Orientation="Horizontal">
                                    <Slider x:Name="gifFrameDelaySlider" 
                                            Minimum="100" Maximum="2000" Value="500" 
                                            TickPlacement="BottomRight" TickFrequency="100" 
                                            IsSnapToTickEnabled="True" Width="200"
                                            Style="{StaticResource SettingsSliderStyle}"/>
                                    <TextBlock x:Name="gifFrameDelayValueText" Text="500ms" 
                                               Style="{StaticResource SettingsLabelStyle}" Margin="12,0,0,0"/>
                                </StackPanel>
                                
                                <TextBlock Text="GIF Quality" FontWeight="SemiBold" FontSize="14" 
                                           Style="{StaticResource SettingsLabelStyle}" Margin="0,12,0,4"/>
                                
                                <ComboBox x:Name="gifQualityComboBox" Margin="0,4,0,8" Height="32">
                                    <ComboBoxItem Content="Low (Small file size)"/>
                                    <ComboBoxItem Content="Medium" IsSelected="True"/>
                                    <ComboBoxItem Content="High (Large file size)"/>
                                </ComboBox>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Expander>
                
                <!-- ========== PRINT SETTINGS ========== -->
                <Expander Style="{StaticResource SettingsSectionStyle}" IsExpanded="False">
                    <Expander.Header>
                        <StackPanel Style="{StaticResource SectionHeaderStyle}">
                            <TextBlock FontFamily="{StaticResource SegoeMDL2}" Text="{StaticResource MDL2_Print}" 
                                       FontSize="20" Foreground="#607D8B" Margin="0,0,12,0" VerticalAlignment="Center"/>
                            <TextBlock Text="Print Settings" FontSize="18" FontWeight="SemiBold" 
                                       Foreground="{StaticResource SurfaceTextPrimaryBrush}" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Expander.Header>
                    
                    <StackPanel>
                        <Border Style="{StaticResource SettingsGroupStyle}">
                            <StackPanel>
                                <TextBlock Text="Print Options" FontWeight="SemiBold" FontSize="16" 
                                           Style="{StaticResource SettingsLabelStyle}"/>
                                
                                <CheckBox x:Name="enablePrintingCheckBox" 
                                          Content="Enable printing functionality"
                                          IsChecked="True" Style="{StaticResource SettingsCheckBoxStyle}"/>
                                
                                <CheckBox x:Name="showPrintButtonCheckBox" 
                                          Content="Show print button in gallery"
                                          IsChecked="True" Style="{StaticResource SettingsCheckBoxStyle}"/>
                                
                                <CheckBox x:Name="printOnlyOriginalsCheckBox" 
                                          Content="Print only original photos (no filters)"
                                          IsChecked="True" Style="{StaticResource SettingsCheckBoxStyle}"/>
                                
                                <CheckBox x:Name="allowReprintsCheckBox" 
                                          Content="Allow reprints of same photos"
                                          IsChecked="True" Style="{StaticResource SettingsCheckBoxStyle}"/>
                                
                                <CheckBox x:Name="showPrintDialogCheckBox" 
                                          Content="Show print dialog before printing"
                                          IsChecked="False" Style="{StaticResource SettingsCheckBoxStyle}"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Expander>
                
                <!-- ========== USER INTERFACE ========== -->
                <Expander Style="{StaticResource SettingsSectionStyle}" IsExpanded="False">
                    <Expander.Header>
                        <StackPanel Style="{StaticResource SectionHeaderStyle}">
                            <TextBlock FontFamily="{StaticResource SegoeMDL2}" Text="{StaticResource MDL2_View}" 
                                       FontSize="20" Foreground="#795548" Margin="0,0,12,0" VerticalAlignment="Center"/>
                            <TextBlock Text="User Interface" FontSize="18" FontWeight="SemiBold" 
                                       Foreground="{StaticResource SurfaceTextPrimaryBrush}" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Expander.Header>
                    
                    <StackPanel>
                        <Border Style="{StaticResource SettingsGroupStyle}">
                            <StackPanel>
                                <TextBlock Text="Button Size Scaling" FontWeight="SemiBold" FontSize="16" 
                                           Style="{StaticResource SettingsLabelStyle}"/>
                                <TextBlock Text="Adjust button sizes for touch screen or mouse use" 
                                           Style="{StaticResource SettingsSubtitleStyle}"/>
                                
                                <StackPanel Style="{StaticResource SettingItemStyle}" Orientation="Horizontal">
                                    <Slider x:Name="buttonSizeSlider" 
                                            Minimum="0.5" Maximum="2.0" Value="1.0" 
                                            TickPlacement="BottomRight" TickFrequency="0.1" 
                                            IsSnapToTickEnabled="True" Width="200"
                                            Style="{StaticResource SettingsSliderStyle}"/>
                                    <TextBlock x:Name="buttonSizeValueText" Text="100%" 
                                               Style="{StaticResource SettingsLabelStyle}" Margin="12,0,0,0"/>
                                </StackPanel>
                                
                                <TextBlock Text="Touch Optimization" FontWeight="SemiBold" FontSize="14" 
                                           Style="{StaticResource SettingsLabelStyle}" Margin="0,12,0,4"/>
                                
                                <CheckBox x:Name="touchOptimizedCheckBox" 
                                          Content="Enable touch-optimized interface"
                                          IsChecked="True" Style="{StaticResource SettingsCheckBoxStyle}"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Expander>
                
                <!-- ========== SECURITY ========== -->
                <Expander Style="{StaticResource SettingsSectionStyle}" IsExpanded="False">
                    <Expander.Header>
                        <StackPanel Style="{StaticResource SectionHeaderStyle}">
                            <TextBlock FontFamily="{StaticResource SegoeMDL2}" Text="{StaticResource MDL2_Lock}" 
                                       FontSize="20" Foreground="#F44336" Margin="0,0,12,0" VerticalAlignment="Center"/>
                            <TextBlock Text="Security Settings" FontSize="18" FontWeight="SemiBold" 
                                       Foreground="{StaticResource SurfaceTextPrimaryBrush}" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Expander.Header>
                    
                    <StackPanel>
                        <Border Style="{StaticResource SettingsGroupStyle}">
                            <StackPanel>
                                <TextBlock Text="PIN Lock Protection" FontWeight="SemiBold" FontSize="16" 
                                           Style="{StaticResource SettingsLabelStyle}"/>
                                <TextBlock Text="Protect settings access with a PIN code" 
                                           Style="{StaticResource SettingsSubtitleStyle}"/>
                                
                                <CheckBox x:Name="enableLockCheckBox" 
                                          Content="Enable PIN lock feature"
                                          Style="{StaticResource SettingsCheckBoxStyle}"/>
                                
                                <StackPanel x:Name="pinSettingsPanel" Visibility="Collapsed" Margin="0,12,0,0">
                                    <TextBlock Text="Current PIN Code" Style="{StaticResource SettingsLabelStyle}"/>
                                    <PasswordBox x:Name="currentPinBox" MaxLength="6" 
                                                 Style="{StaticResource SettingsTextBoxStyle}" Width="200" HorizontalAlignment="Left"/>
                                    
                                    <TextBlock Text="New PIN Code (4-6 digits)" Style="{StaticResource SettingsLabelStyle}" Margin="0,12,0,4"/>
                                    <PasswordBox x:Name="newPinBox" MaxLength="6" 
                                                 Style="{StaticResource SettingsTextBoxStyle}" Width="200" HorizontalAlignment="Left"/>
                                    
                                    <TextBlock Text="Confirm New PIN" Style="{StaticResource SettingsLabelStyle}" Margin="0,12,0,4"/>
                                    <PasswordBox x:Name="confirmPinBox" MaxLength="6" 
                                                 Style="{StaticResource SettingsTextBoxStyle}" Width="200" HorizontalAlignment="Left"/>
                                    
                                    <Button Content="Update PIN" Padding="12,6" Margin="0,12,0,0" HorizontalAlignment="Left"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Expander>
                
                <!-- ========== CLOUD & SHARING ========== -->
                <Expander Style="{StaticResource SettingsSectionStyle}" IsExpanded="False">
                    <Expander.Header>
                        <StackPanel Style="{StaticResource SectionHeaderStyle}">
                            <TextBlock Text="☁️" FontSize="20" Foreground="#03A9F4" 
                                       Margin="0,0,12,0" VerticalAlignment="Center"/>
                            <TextBlock Text="Cloud & Sharing" FontSize="18" FontWeight="SemiBold" 
                                       Foreground="{StaticResource SurfaceTextPrimaryBrush}" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Expander.Header>
                    
                    <StackPanel>
                        <!-- AWS S3 Settings -->
                        <Border Style="{StaticResource SettingsGroupStyle}">
                            <StackPanel>
                                <TextBlock Text="AWS S3 Cloud Storage" FontWeight="SemiBold" FontSize="16" 
                                           Style="{StaticResource SettingsLabelStyle}"/>
                                <TextBlock Text="Automatically upload photos to Amazon S3" 
                                           Style="{StaticResource SettingsSubtitleStyle}"/>
                                
                                <CheckBox x:Name="enableS3UploadCheckBox" 
                                          Content="Enable S3 cloud uploads"
                                          Style="{StaticResource SettingsCheckBoxStyle}"/>
                                
                                <StackPanel x:Name="s3SettingsPanel" Margin="0,12,0,0">
                                    <TextBlock Text="AWS Access Key ID" Style="{StaticResource SettingsLabelStyle}"/>
                                    <TextBox x:Name="awsAccessKeyTextBox" 
                                             Style="{StaticResource SettingsTextBoxStyle}"/>
                                    
                                    <TextBlock Text="AWS Secret Access Key" Style="{StaticResource SettingsLabelStyle}"/>
                                    <PasswordBox x:Name="awsSecretKeyBox" 
                                                 Style="{StaticResource SettingsTextBoxStyle}"/>
                                    
                                    <TextBlock Text="S3 Bucket Name" Style="{StaticResource SettingsLabelStyle}"/>
                                    <TextBox x:Name="s3BucketNameTextBox" 
                                             Style="{StaticResource SettingsTextBoxStyle}"/>
                                    
                                    <TextBlock Text="Gallery Base URL" Style="{StaticResource SettingsLabelStyle}"/>
                                    <TextBox x:Name="galleryBaseUrlTextBox" 
                                             Style="{StaticResource SettingsTextBoxStyle}"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                        
                        <!-- SMS Sharing -->
                        <Border Style="{StaticResource SettingsGroupStyle}">
                            <StackPanel>
                                <TextBlock Text="SMS Photo Sharing" FontWeight="SemiBold" FontSize="16" 
                                           Style="{StaticResource SettingsLabelStyle}"/>
                                <TextBlock Text="Send photos via SMS using Twilio" 
                                           Style="{StaticResource SettingsSubtitleStyle}"/>
                                
                                <CheckBox x:Name="enableSmsCheckBox" 
                                          Content="Enable SMS photo sharing"
                                          Style="{StaticResource SettingsCheckBoxStyle}"/>
                                
                                <StackPanel x:Name="smsSettingsPanel" Margin="0,12,0,0">
                                    <TextBlock Text="Twilio Account SID" Style="{StaticResource SettingsLabelStyle}"/>
                                    <TextBox x:Name="twilioAccountSidTextBox" 
                                             Style="{StaticResource SettingsTextBoxStyle}"/>
                                    
                                    <TextBlock Text="Twilio Auth Token" Style="{StaticResource SettingsLabelStyle}"/>
                                    <PasswordBox x:Name="twilioAuthTokenBox" 
                                                 Style="{StaticResource SettingsTextBoxStyle}"/>
                                    
                                    <TextBlock Text="Twilio Phone Number" Style="{StaticResource SettingsLabelStyle}"/>
                                    <TextBox x:Name="twilioPhoneTextBox" 
                                             Style="{StaticResource SettingsTextBoxStyle}"/>
                                    
                                    <TextBlock Text="Test Phone Number" Style="{StaticResource SettingsLabelStyle}"/>
                                    <TextBox x:Name="testPhoneTextBox" 
                                             Style="{StaticResource SettingsTextBoxStyle}"/>
                                    
                                    <Button Content="Send Test SMS" Padding="12,6" Margin="0,8,0,0" HorizontalAlignment="Left"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Expander>
                
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>