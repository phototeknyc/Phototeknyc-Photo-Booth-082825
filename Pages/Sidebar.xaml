<Page x:Class="Photobooth.Pages.SideNavbar"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:Photobooth.Pages"
      mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="350" Background="{StaticResource SurfaceSecondaryBrush}"
      Title="SideNavbar">

    <Page.Resources>
        <!-- Modern Button Style with larger rows -->
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="20,16"/>
            <Setter Property="Margin" Value="0"/>
            <Setter Property="Height" Value="56"/>
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                            VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                            Margin="{TemplateBinding Padding}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource SurfaceButtonHoverBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Modern Expander Style -->
        <Style x:Key="ModernExpander" TargetType="Expander">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Margin" Value="0,2"/>
        </Style>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Collapse Button -->
        <Button x:Name="CollapseButton" Grid.Row="0" HorizontalAlignment="Right" 
                Width="32" Height="32" Margin="8" 
                Background="Transparent" BorderThickness="0" 
                Click="CollapseButton_Click" Cursor="Hand"
                ToolTip="Collapse Sidebar">
            <Path Width="12" Height="12" Fill="#CCCCCC" Stretch="Uniform">
                <Path.Data>
                    <PathGeometry>
                        <PathFigure StartPoint="8,0">
                            <LineSegment Point="0,6"/>
                            <LineSegment Point="8,12"/>
                        </PathFigure>
                    </PathGeometry>
                </Path.Data>
            </Path>
        </Button>
        
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <StackPanel>
                
                <!-- Add Section -->
                <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1">
                    <StackPanel>
                        <TextBlock Text="Add" FontWeight="SemiBold" FontSize="15" 
                                   Foreground="#CCCCCC" Margin="16,12,16,8"/>
                        
                        <!-- Photo From Booth -->
                        <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1">
                            <Button Style="{StaticResource ModernButton}" PreviewMouseLeftButtonDown="ActionCaptureImage">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <Path Width="18" Height="18" Stretch="Uniform" Fill="White" Margin="0,0,12,0">
                                    <Path.Data>
                                        <GeometryGroup>
                                            <RectangleGeometry Rect="0,4,18,10" RadiusX="1" RadiusY="1"/>
                                            <EllipseGeometry Center="9,9" RadiusX="3" RadiusY="3"/>
                                            <RectangleGeometry Rect="2,2,4,2"/>
                                        </GeometryGroup>
                                    </Path.Data>
                                </Path>
                                <TextBlock Text="Photo From Booth" FontSize="16" Foreground="White" 
                                         VerticalAlignment="Center" Margin="0,2,0,0"/>
                            </StackPanel>
                            </Button>
                        </Border>
                        
                        <!-- Image -->
                        <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1">
                            <Button Style="{StaticResource ModernButton}" PreviewMouseLeftButtonDown="ActionImportImage">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <Path Width="18" Height="18" Stretch="Uniform" Fill="White" Margin="0,0,12,0">
                                    <Path.Data>
                                        <GeometryGroup>
                                            <RectangleGeometry Rect="0,2,18,14"/>
                                            <PathGeometry>
                                                <PathFigure StartPoint="2,12">
                                                    <LineSegment Point="6,8"/>
                                                    <LineSegment Point="10,11"/>
                                                    <LineSegment Point="14,7"/>
                                                    <LineSegment Point="16,9"/>
                                                    <LineSegment Point="16,14"/>
                                                    <LineSegment Point="2,14"/>
                                                </PathFigure>
                                            </PathGeometry>
                                            <EllipseGeometry Center="13,6" RadiusX="2" RadiusY="2"/>
                                        </GeometryGroup>
                                    </Path.Data>
                                </Path>
                                <TextBlock Text="Image" FontSize="16" Foreground="White" 
                                         VerticalAlignment="Center" Margin="0,2,0,0"/>
                            </StackPanel>
                            </Button>
                        </Border>
                        
                        <!-- Text -->
                        <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1">
                            <Button Style="{StaticResource ModernButton}" PreviewMouseLeftButtonDown="ActionAddText">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <TextBlock Text="T" FontSize="20" FontWeight="Bold" 
                                         Foreground="White" Width="20" Margin="0,0,12,0" 
                                         VerticalAlignment="Center" TextAlignment="Center"/>
                                <TextBlock Text="Text" FontSize="16" Foreground="White" 
                                         VerticalAlignment="Center" Margin="0,2,0,0"/>
                            </StackPanel>
                            </Button>
                        </Border>
                        
                        <!-- Shape with submenu indicator -->
                        <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1">
                            <Expander Style="{StaticResource ModernExpander}" IsExpanded="False">
                            <Expander.Header>
                                <Grid Width="310">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Left">
                                        <Path Width="18" Height="18" Stretch="Uniform" Fill="White" Margin="0,0,12,0">
                                            <Path.Data>
                                                <GeometryGroup>
                                                    <RectangleGeometry Rect="0,0,8,8"/>
                                                    <EllipseGeometry Center="13,5" RadiusX="5" RadiusY="5"/>
                                                </GeometryGroup>
                                            </Path.Data>
                                        </Path>
                                        <TextBlock Text="Shape" FontSize="16" Foreground="White" 
                                                 VerticalAlignment="Center"/>
                                    </StackPanel>
                                    <Path Grid.Column="1" Width="10" Height="10" Fill="#999" Stretch="Uniform" 
                                          HorizontalAlignment="Right" Margin="0,0,20,0" VerticalAlignment="Center"
                                          RenderTransformOrigin="0.5,0.5">
                                        <Path.Data>
                                            <PathGeometry>
                                                <PathFigure StartPoint="0,0">
                                                    <LineSegment Point="5,5"/>
                                                    <LineSegment Point="0,10"/>
                                                </PathFigure>
                                            </PathGeometry>
                                        </Path.Data>
                                    </Path>
                                </Grid>
                            </Expander.Header>
                            <StackPanel Margin="48,0,0,0">
                                <!-- Rectangle -->
                                <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1">
                                    <Button Style="{StaticResource ModernButton}" Command="{Binding AddRectangleCmd}" Height="48">
                                        <StackPanel Orientation="Horizontal">
                                            <Rectangle Width="16" Height="16" Stroke="#CCCCCC" StrokeThickness="2" Fill="Transparent" Margin="0,0,10,0"/>
                                            <TextBlock Text="Rectangle" FontSize="15" Foreground="#CCCCCC" VerticalAlignment="Center"/>
                                        </StackPanel>
                                    </Button>
                                </Border>
                                <!-- Circle -->
                                <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1">
                                    <Button Style="{StaticResource ModernButton}" Command="{Binding AddCircleCmd}" Height="48">
                                        <StackPanel Orientation="Horizontal">
                                            <Ellipse Width="16" Height="16" Stroke="#CCCCCC" StrokeThickness="2" Fill="Transparent" Margin="0,0,10,0"/>
                                            <TextBlock Text="Circle" FontSize="15" Foreground="#CCCCCC" VerticalAlignment="Center"/>
                                        </StackPanel>
                                    </Button>
                                </Border>
                                <!-- Line -->
                                <Button Style="{StaticResource ModernButton}" Command="{Binding AddLineCmd}" Height="48">
                                    <StackPanel Orientation="Horizontal">
                                        <Path Width="16" Height="16" Stretch="Uniform" Stroke="#CCCCCC" StrokeThickness="2" Margin="0,0,10,0">
                                            <Path.Data>
                                                <LineGeometry StartPoint="0,16" EndPoint="16,0"/>
                                            </Path.Data>
                                        </Path>
                                        <TextBlock Text="Line" FontSize="15" Foreground="#CCCCCC" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                            </Expander>
                        </Border>
                        
                        <!-- Background Color -->
                        <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1">
                            <Button Style="{StaticResource ModernButton}" Command="{Binding ChangeCanvasBackgroundCmd}">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <Border Width="18" Height="18" 
                                        Background="{Binding CanvasBackgroundColor}" 
                                        BorderBrush="#666" BorderThickness="1" Margin="0,0,12,0"/>
                                <TextBlock Text="Background Color" FontSize="16" Foreground="White" 
                                         VerticalAlignment="Center"/>
                            </StackPanel>
                            </Button>
                        </Border>
                        
                        <!-- QR Code -->
                        <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1">
                            <Button Style="{StaticResource ModernButton}" Command="{Binding AddQRCodeCmd}">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <Path Width="18" Height="18" Stretch="Uniform" Fill="White" Margin="0,0,12,0">
                                    <Path.Data>
                                        <GeometryGroup>
                                            <RectangleGeometry Rect="0,0,8,8"/>
                                            <RectangleGeometry Rect="2,2,4,4"/>
                                            <RectangleGeometry Rect="10,0,8,8"/>
                                            <RectangleGeometry Rect="12,2,4,4"/>
                                            <RectangleGeometry Rect="0,10,8,8"/>
                                            <RectangleGeometry Rect="2,12,4,4"/>
                                            <RectangleGeometry Rect="10,10,2,2"/>
                                            <RectangleGeometry Rect="14,10,2,2"/>
                                            <RectangleGeometry Rect="10,14,2,2"/>
                                            <RectangleGeometry Rect="14,14,4,4"/>
                                        </GeometryGroup>
                                    </Path.Data>
                                </Path>
                                <TextBlock Text="QR Code" FontSize="16" Foreground="White" 
                                         VerticalAlignment="Center"/>
                            </StackPanel>
                            </Button>
                        </Border>
                        
                        <!-- Session Data with submenu indicator -->
                        <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1">
                            <Expander Style="{StaticResource ModernExpander}" IsExpanded="False">
                            <Expander.Header>
                                <Grid Width="310">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Left">
                                        <Path Width="18" Height="18" Stretch="Uniform" Fill="White" Margin="0,0,12,0">
                                            <Path.Data>
                                                <GeometryGroup>
                                                    <EllipseGeometry Center="9,7" RadiusX="7" RadiusY="7"/>
                                                    <EllipseGeometry Center="9,7" RadiusX="5" RadiusY="5"/>
                                                    <RectangleGeometry Rect="7,12,4,6"/>
                                                </GeometryGroup>
                                            </Path.Data>
                                        </Path>
                                        <TextBlock Text="Session Data" FontSize="16" Foreground="White" 
                                                 VerticalAlignment="Center"/>
                                    </StackPanel>
                                    <Path Grid.Column="1" Width="10" Height="10" Fill="#999" Stretch="Uniform" 
                                          HorizontalAlignment="Right" Margin="0,0,20,0" VerticalAlignment="Center">
                                        <Path.Data>
                                            <PathGeometry>
                                                <PathFigure StartPoint="0,0">
                                                    <LineSegment Point="5,5"/>
                                                    <LineSegment Point="0,10"/>
                                                </PathFigure>
                                            </PathGeometry>
                                        </Path.Data>
                                    </Path>
                                </Grid>
                            </Expander.Header>
                            <StackPanel Margin="48,0,0,0">
                                <!-- Session data items will go here -->
                            </StackPanel>
                            </Expander>
                        </Border>
                    </StackPanel>
                </Border>
                
                <!-- Layout Section -->
                <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1" Margin="0,0,0,0">
                    <Expander Header="Layout" Style="{StaticResource ModernExpander}" IsExpanded="True">
                        <Expander.HeaderTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding}" FontWeight="SemiBold" FontSize="15" Foreground="#CCCCCC" Margin="0,12,0,8"/>
                            </DataTemplate>
                        </Expander.HeaderTemplate>
                        <StackPanel>
                            
                            <!-- View Dimension Selector -->
                            <StackPanel Margin="16,0,16,8">
                                <TextBlock Text="View Dimension In" FontSize="14" Foreground="#999" Margin="0,0,0,8"/>
                                <ComboBox FontSize="15" Height="42" Background="{StaticResource SurfacePanelBrush}" Foreground="White" BorderBrush="{StaticResource SurfaceBorderBrush}">
                                    <ComboBoxItem Content="Pixels" IsSelected="True"/>
                                    <ComboBoxItem Content="Inches"/>
                                    <ComboBoxItem Content="Centimeters"/>
                                </ComboBox>
                            </StackPanel>
                            
                            <!-- Paper Size -->
                            <StackPanel Margin="16,0,16,8">
                                <TextBlock Text="Paper Size" FontSize="14" Foreground="#999" Margin="0,0,0,8"/>
                                <ComboBox x:Name="comboBox" FontSize="15" Height="42" 
                                          Background="{StaticResource SurfacePanelBrush}" Foreground="White" BorderBrush="{StaticResource SurfaceBorderBrush}"
                                          ItemsSource="{Binding ListOfRatios}" 
                                          SelectedItem="{Binding SelectedRatio, Mode=TwoWay}"/>
                            </StackPanel>
                            
                            <!-- Print to Secondary Printer Checkbox -->
                            <CheckBox Content="Print to Secondary Printer" 
                                      FontSize="15" Foreground="White" 
                                      Margin="16,8,16,8"/>
                            
                            <!-- Resolution -->
                            <StackPanel Margin="16,0,16,8">
                                <TextBlock Text="Resolution" FontSize="14" Foreground="#999" Margin="0,0,0,8"/>
                                <ComboBox FontSize="15" Height="42" Background="{StaticResource SurfacePanelBrush}" Foreground="White" BorderBrush="{StaticResource SurfaceBorderBrush}">
                                    <ComboBoxItem Content="300 dpi" IsSelected="True"/>
                                    <ComboBoxItem Content="150 dpi"/>
                                    <ComboBoxItem Content="72 dpi"/>
                                </ComboBox>
                            </StackPanel>
                            
                            <!-- Orientation -->
                            <StackPanel Margin="16,0,16,8">
                                <TextBlock Text="Orientation" FontSize="14" Foreground="#999" Margin="0,0,0,8"/>
                                <ComboBox FontSize="15" Height="42" Background="{StaticResource SurfacePanelBrush}" Foreground="White" BorderBrush="{StaticResource SurfaceBorderBrush}">
                                    <ComboBoxItem Content="Horizontal" IsSelected="True"/>
                                    <ComboBoxItem Content="Vertical"/>
                                </ComboBox>
                                <Button Style="{StaticResource ModernButton}" PreviewMouseLeftButtonDown="ActionChangeOrientation" 
                                        Margin="0,8,0,0" Height="48">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                        <Path Width="16" Height="16" Stretch="Uniform" Fill="White" Margin="0,0,8,0">
                                            <Path.Data>
                                                <PathGeometry>
                                                    <PathFigure StartPoint="8,2">
                                                        <ArcSegment Point="14,8" Size="6,6" SweepDirection="Clockwise"/>
                                                        <LineSegment Point="10,8"/>
                                                        <LineSegment Point="12,6"/>
                                                        <LineSegment Point="12,10"/>
                                                        <LineSegment Point="14,8"/>
                                                    </PathFigure>
                                                </PathGeometry>
                                            </Path.Data>
                                        </Path>
                                        <TextBlock Text="Change Orientation" FontSize="15" Foreground="White"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                            
                            <!-- Width and Height -->
                            <Grid Margin="16,0,16,12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="12"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="Width" FontSize="14" Foreground="#999" Margin="0,0,0,8"/>
                                    <TextBox Name="CanvasWidthDisplay" Text="{Binding CustomDesignerCanvas.ActualPixelWidth, Mode=OneWay}" 
                                             Background="{StaticResource SurfacePanelBrush}" Foreground="White" BorderBrush="{StaticResource SurfaceBorderBrush}" 
                                             FontSize="15" Height="42" IsReadOnly="True"/>
                                </StackPanel>
                                <StackPanel Grid.Column="2">
                                    <TextBlock Text="Height" FontSize="14" Foreground="#999" Margin="0,0,0,8"/>
                                    <TextBox Name="CanvasHeightDisplay" Text="{Binding CustomDesignerCanvas.ActualPixelHeight, Mode=OneWay}" 
                                             Background="{StaticResource SurfacePanelBrush}" Foreground="White" BorderBrush="{StaticResource SurfaceBorderBrush}" 
                                             FontSize="15" Height="42" IsReadOnly="True"/>
                                </StackPanel>
                            </Grid>
                            
                            <!-- Clear Canvas -->
                            <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1" Margin="0,0,0,8">
                                <Button Style="{StaticResource ModernButton}" PreviewMouseLeftButtonDown="ActionClearCanvas" Height="48">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <Path Width="16" Height="16" Stretch="Uniform" Fill="#FF6B6B" Margin="0,0,8,0">
                                        <Path.Data>
                                            <GeometryGroup>
                                                <LineGeometry StartPoint="0,0" EndPoint="16,16"/>
                                                <LineGeometry StartPoint="0,16" EndPoint="16,0"/>
                                            </GeometryGroup>
                                        </Path.Data>
                                    </Path>
                                    <TextBlock Text="Clear Canvas" FontSize="15" Foreground="White"/>
                                </StackPanel>
                                </Button>
                            </Border>
                        </StackPanel>
                    </Expander>
                </Border>
                
                <!-- Events Section -->
                <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1" Margin="0,0,0,0">
                    <Expander Header="Events" Style="{StaticResource ModernExpander}" IsExpanded="True">
                        <Expander.HeaderTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding}" FontWeight="SemiBold" FontSize="15" Foreground="#CCCCCC" Margin="0,12,0,8"/>
                            </DataTemplate>
                        </Expander.HeaderTemplate>
                        <StackPanel Margin="0,4,0,8">
                            
                            <!-- Current Event Selection -->
                            <Grid Margin="16,0,16,8">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Current Event:" FontSize="14" Foreground="#999" Margin="0,4,8,2"/>
                                <Button Grid.Column="1" Content="↻" FontSize="16" Width="24" Height="24" 
                                        Command="{Binding RefreshEventsCmd}" 
                                        ToolTip="Refresh Events List"
                                        Background="{StaticResource SurfaceButtonHoverBrush}" Foreground="White" BorderThickness="0" Margin="0,2,0,0">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border Background="{TemplateBinding Background}" 
                                                                CornerRadius="2" 
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                BorderBrush="{TemplateBinding BorderBrush}">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter Property="Background" Value="{StaticResource SurfaceButtonPressedBrush}"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>
                            </Grid>
                            <ComboBox x:Name="EventsComboBox" 
                                      FontSize="15" Height="42" Margin="16,0,16,8"
                                      Background="{StaticResource SurfacePanelBrush}" Foreground="White" BorderBrush="{StaticResource SurfaceBorderBrush}"
                                      ItemsSource="{Binding Events}" 
                                      SelectedItem="{Binding SelectedEvent, Mode=TwoWay}">
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel>
                                            <TextBlock Text="{Binding Name}" FontWeight="SemiBold"/>
                                            <TextBlock Text="{Binding EventType}" FontSize="10" Foreground="#AAA"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>
                            
                            <!-- Create New Event -->
                            <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1">
                                <Button Style="{StaticResource ModernButton}" Command="{Binding CreateEventCmd}" Height="48">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <Path Width="14" Height="14" Stretch="Uniform" Fill="White" Margin="0,0,8,0">
                                        <Path.Data>
                                            <GeometryGroup>
                                                <LineGeometry StartPoint="7,0" EndPoint="7,14"/>
                                                <LineGeometry StartPoint="0,7" EndPoint="14,7"/>
                                            </GeometryGroup>
                                        </Path.Data>
                                    </Path>
                                    <TextBlock Text="Create Event" FontSize="15" Foreground="White"/>
                                </StackPanel>
                                </Button>
                            </Border>
                            
                            <!-- Browse Events -->
                            <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1">
                                <Button Style="{StaticResource ModernButton}" Command="{Binding BrowseEventsCmd}" Height="48">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <Path Width="14" Height="14" Stretch="Uniform" Fill="White" Margin="0,0,8,0">
                                        <Path.Data>
                                            <GeometryGroup>
                                                <RectangleGeometry Rect="0,0,14,14"/>
                                                <RectangleGeometry Rect="2,2,4,4"/>
                                                <RectangleGeometry Rect="8,2,4,4"/>
                                                <RectangleGeometry Rect="2,8,4,4"/>
                                                <RectangleGeometry Rect="8,8,4,4"/>
                                            </GeometryGroup>
                                        </Path.Data>
                                    </Path>
                                    <TextBlock Text="Browse Events" FontSize="15" Foreground="White"/>
                                </StackPanel>
                                </Button>
                            </Border>
                            
                            <!-- Event Templates -->
                            <TextBlock Text="Event Templates:" FontSize="14" Foreground="#999" Margin="16,8,16,2"/>
                            <ListBox x:Name="EventTemplatesListBox"
                                     Background="{StaticResource SurfacePanelBrush}" Foreground="White" BorderBrush="{StaticResource SurfaceBorderBrush}"
                                     Height="120" Margin="16,0,16,8"
                                     ItemsSource="{Binding EventTemplates}"
                                     SelectedItem="{Binding SelectedEventTemplate, Mode=TwoWay}"
                                     ScrollViewer.VerticalScrollBarVisibility="Auto">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="{StaticResource SurfaceButtonHoverBrush}" Margin="2" Padding="6" CornerRadius="3" 
                                                Cursor="Hand" MouseLeftButtonDown="EventTemplate_Click" Tag="{Binding}">
                                            <Border.Style>
                                                <Style TargetType="Border">
                                                    <Style.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Background" Value="#4E4E52"/>
                                                        </Trigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Border.Style>
                                            <StackPanel>
                                                <TextBlock Text="{Binding Name}" FontWeight="SemiBold" FontSize="14"/>
                                                <TextBlock Text="{Binding Description}" FontSize="10" Foreground="#AAA" 
                                                           TextTrimming="CharacterEllipsis"/>
                                                <TextBlock Text="{Binding CreatedDate, StringFormat='Created: {0:MM/dd/yyyy}'}" 
                                                           FontSize="9" Foreground="#888"/>
                                                <TextBlock Text="Click to load template" FontSize="8" Foreground="#0078D4" 
                                                           Margin="0,2,0,0" FontStyle="Italic"/>
                                            </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                            
                            <!-- Event Template Actions -->
                            <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1">
                                <Button Style="{StaticResource ModernButton}" Command="{Binding LoadEventTemplateCmd}" Height="48">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <TextBlock FontFamily="{StaticResource SegoeMDL2}" Text="{StaticResource MDL2_Download}" 
                                             FontSize="16" Foreground="White" Width="14" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                    <TextBlock Text="Load Template" FontSize="15" Foreground="White"/>
                                </StackPanel>
                                </Button>
                            </Border>
                            
                            <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1">
                                <Button Style="{StaticResource ModernButton}" Command="{Binding AssignTemplateToEventCmd}" Height="48">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <TextBlock FontFamily="{StaticResource SegoeMDL2}" Text="{StaticResource MDL2_Link}" 
                                             FontSize="16" Foreground="White" Width="14" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                    <TextBlock Text="Assign Current Template" FontSize="15" Foreground="White"/>
                                </StackPanel>
                                </Button>
                            </Border>
                            
                            <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1">
                                <Button Style="{StaticResource ModernButton}" Command="{Binding DuplicateTemplateCmd}" Height="48">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <TextBlock FontFamily="{StaticResource SegoeMDL2}" Text="{StaticResource MDL2_Copy}" 
                                             FontSize="16" Foreground="White" Width="14" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                    <TextBlock Text="Duplicate Template" FontSize="15" Foreground="White"/>
                                </StackPanel>
                                </Button>
                            </Border>
                            
                            <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1">
                                <Button Style="{StaticResource ModernButton}" Command="{Binding SetAsDefaultTemplateCmd}" Height="48">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <TextBlock FontFamily="{StaticResource SegoeMDL2}" Text="{StaticResource MDL2_Favorite}" 
                                             FontSize="16" Foreground="#FFD700" Width="14" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                    <TextBlock Text="Set as Default" FontSize="15" Foreground="White"/>
                                </StackPanel>
                                </Button>
                            </Border>
                            
                            <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1">
                                <Button Style="{StaticResource ModernButton}" Command="{Binding RemoveTemplateFromEventCmd}" Height="48">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <TextBlock FontFamily="{StaticResource SegoeMDL2}" Text="{StaticResource MDL2_Delete}" 
                                             FontSize="16" Foreground="#FF6B6B" Width="14" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                    <TextBlock Text="Remove from Event" FontSize="15" Foreground="White"/>
                                </StackPanel>
                                </Button>
                            </Border>
                            
                        </StackPanel>
                    </Expander>
                </Border>
                
                <!-- Settings Section -->
                <Border BorderBrush="{StaticResource SurfaceBorderBrush}" BorderThickness="0,0,0,1" Margin="0,0,0,0">
                    <Expander Header="Settings" Style="{StaticResource ModernExpander}" IsExpanded="False">
                        <Expander.HeaderTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding}" FontWeight="SemiBold" FontSize="15" Foreground="#CCCCCC" Margin="0,12,0,8"/>
                            </DataTemplate>
                        </Expander.HeaderTemplate>
                        <StackPanel Margin="16,4,16,8">
                            <!-- Debug Mode Toggle -->
                            <CheckBox x:Name="DebugModeCheckBox" 
                                      Content="Enable Debug Mode" 
                                      FontSize="15" 
                                      Foreground="White" 
                                      Margin="0,4"
                                      ToolTip="Toggle debug messages in the output window"
                                      Checked="DebugModeCheckBox_Checked"
                                      Unchecked="DebugModeCheckBox_Unchecked"/>
                        </StackPanel>
                    </Expander>
                </Border>
                
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>