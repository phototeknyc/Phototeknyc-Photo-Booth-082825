<UserControl x:Class="Photobooth.Controls.FontControlsPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:Photobooth.Controls"
             mc:Ignorable="d"
             d:DesignHeight="800" d:DesignWidth="350">

    <UserControl.Resources>
        <!-- Modern Dark Theme Colors -->
        <Color x:Key="PanelBg">#1A1A2E</Color>
        <Color x:Key="SectionBg">#16213E</Color>
        <Color x:Key="InputBg">#0F3460</Color>
        <Color x:Key="AccentColor">#6C63FF</Color>
        <Color x:Key="TextColor">#FFFFFF</Color>
        <Color x:Key="SubtextColor">#B0B0B0</Color>

        <SolidColorBrush x:Key="PanelBgBrush" Color="{StaticResource PanelBg}"/>
        <SolidColorBrush x:Key="SectionBgBrush" Color="{StaticResource SectionBg}"/>
        <SolidColorBrush x:Key="InputBgBrush" Color="{StaticResource InputBg}"/>
        <SolidColorBrush x:Key="AccentBrush" Color="{StaticResource AccentColor}"/>
        <SolidColorBrush x:Key="TextBrush" Color="{StaticResource TextColor}"/>
        <SolidColorBrush x:Key="SubtextBrush" Color="{StaticResource SubtextColor}"/>

        <!-- Section Header Style -->
        <Style x:Key="SectionHeader" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource SubtextBrush}"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,10,0,5"/>
        </Style>

        <!-- Input Control Style -->
        <Style x:Key="ModernComboBox" TargetType="ComboBox">
            <Setter Property="Background" Value="{StaticResource InputBgBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Height" Value="35"/>
            <Setter Property="Padding" Value="10,0"/>
            <Setter Property="Margin" Value="0,3"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Grid>
                            <!-- Invisible toggle to bind IsDropDownOpen - covers entire area -->
                            <ToggleButton x:Name="ToggleButton"
                                          Background="Transparent"
                                          BorderThickness="0"
                                          Focusable="False"
                                          ClickMode="Press"
                                          IsChecked="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}">
                                <ToggleButton.Template>
                                    <ControlTemplate TargetType="ToggleButton">
                                        <Border Background="Transparent"/>
                                    </ControlTemplate>
                                </ToggleButton.Template>
                            </ToggleButton>

                            <Border Name="Border"
                                    IsHitTestVisible="False"
                                    Background="{TemplateBinding Background}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    CornerRadius="3">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="30"/>
                                    </Grid.ColumnDefinitions>

                                    <!-- Display the selected item text -->
                                    <ContentPresenter Grid.Column="0"
                                                     Name="ContentSite"
                                                     Content="{TemplateBinding SelectionBoxItem}"
                                                     ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                                     ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                                     Margin="10,0,0,0"
                                                     HorizontalAlignment="Left"
                                                     VerticalAlignment="Center">
                                        <ContentPresenter.Resources>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
                                            </Style>
                                        </ContentPresenter.Resources>
                                    </ContentPresenter>

                                    <!-- Dropdown arrow -->
                                    <Path Grid.Column="1"
                                          x:Name="Arrow"
                                          Fill="{StaticResource TextBrush}"
                                          HorizontalAlignment="Center"
                                          VerticalAlignment="Center"
                                          Data="M 0 0 L 4 4 L 8 0 Z"/>
                                </Grid>
                            </Border>

                            <!-- Popup for dropdown -->
                            <Popup Name="PART_Popup"
                                   Placement="Bottom"
                                   IsOpen="{TemplateBinding IsDropDownOpen}"
                                   AllowsTransparency="True"
                                   Focusable="False"
                                   PopupAnimation="Slide">
                                <Grid Name="DropDown"
                                      SnapsToDevicePixels="True"
                                      MinWidth="{TemplateBinding ActualWidth}"
                                      MaxHeight="{TemplateBinding MaxDropDownHeight}">
                                    <Border x:Name="DropDownBorder"
                                            Background="{StaticResource SectionBgBrush}"
                                            BorderThickness="1"
                                            BorderBrush="{StaticResource InputBgBrush}"
                                            CornerRadius="3">
                                        <ScrollViewer Margin="4,6,4,6" SnapsToDevicePixels="True">
                                            <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained"/>
                                        </ScrollViewer>
                                    </Border>
                                </Grid>
                            </Popup>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <!-- Style for ComboBoxItems -->
            <Setter Property="ItemContainerStyle">
                <Setter.Value>
                    <Style TargetType="ComboBoxItem">
                        <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="Padding" Value="10,5"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ComboBoxItem">
                                    <Border Name="Border"
                                            Background="{TemplateBinding Background}"
                                            Padding="{TemplateBinding Padding}">
                                        <ContentPresenter>
                                            <ContentPresenter.Resources>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
                                                </Style>
                                            </ContentPresenter.Resources>
                                        </ContentPresenter>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsHighlighted" Value="True">
                                            <Setter TargetName="Border" Property="Background" Value="{StaticResource AccentBrush}"/>
                                        </Trigger>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter TargetName="Border" Property="Background" Value="{StaticResource InputBgBrush}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Touch Button Style -->
        <Style x:Key="TouchButton" TargetType="ToggleButton">
            <Setter Property="MinWidth" Value="40"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Background" Value="{StaticResource InputBgBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="5">
                            <ContentPresenter HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter Property="Background" Value="{StaticResource AccentBrush}"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Opacity" Value="0.8"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Slider Style -->
        <Style x:Key="ModernSlider" TargetType="Slider">
            <Setter Property="Height" Value="25"/>
            <Setter Property="Margin" Value="0,5"/>
        </Style>

        <!-- Touch Radio Button Style -->
        <Style x:Key="TouchRadioButton" TargetType="RadioButton">
            <Setter Property="MinWidth" Value="40"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Background" Value="{StaticResource InputBgBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="5">
                            <ContentPresenter HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter Property="Background" Value="{StaticResource AccentBrush}"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Opacity" Value="0.8"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Grid Background="{StaticResource PanelBgBrush}">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="15">
                <!-- Header -->
                <TextBlock Text="TYPOGRAPHY"
                          Foreground="{StaticResource TextBrush}"
                          FontSize="18"
                          FontWeight="Bold"
                          Margin="0,0,0,20"/>

                <!-- Font Family Section -->
                <TextBlock Text="Font Family" Style="{StaticResource SectionHeader}"/>
                <ComboBox x:Name="FontFamilyCombo"
                         Style="{StaticResource ModernComboBox}"
                         SelectionChanged="FontFamilyCombo_SelectionChanged">
                    <ComboBoxItem>Arial</ComboBoxItem>
                    <ComboBoxItem>Times New Roman</ComboBoxItem>
                    <ComboBoxItem>Calibri</ComboBoxItem>
                    <ComboBoxItem>Verdana</ComboBoxItem>
                    <ComboBoxItem>Georgia</ComboBoxItem>
                    <ComboBoxItem>Segoe UI</ComboBoxItem>
                    <ComboBoxItem>Helvetica</ComboBoxItem>
                    <ComboBoxItem>Comic Sans MS</ComboBoxItem>
                    <ComboBoxItem>Impact</ComboBoxItem>
                    <ComboBoxItem>Trebuchet MS</ComboBoxItem>
                </ComboBox>

                <!-- Font Style & Weight -->
                <Grid Margin="0,10,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="10"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="Style" Style="{StaticResource SectionHeader}"/>
                        <ComboBox x:Name="FontStyleCombo"
                                 Style="{StaticResource ModernComboBox}"
                                 SelectionChanged="FontStyleCombo_SelectionChanged">
                            <ComboBoxItem>Regular</ComboBoxItem>
                            <ComboBoxItem>Italic</ComboBoxItem>
                            <ComboBoxItem>Oblique</ComboBoxItem>
                        </ComboBox>
                    </StackPanel>

                    <StackPanel Grid.Column="2">
                        <TextBlock Text="Weight" Style="{StaticResource SectionHeader}"/>
                        <ComboBox x:Name="FontWeightCombo"
                                 Style="{StaticResource ModernComboBox}"
                                 SelectionChanged="FontWeightCombo_SelectionChanged">
                            <ComboBoxItem>Light</ComboBoxItem>
                            <ComboBoxItem>Regular</ComboBoxItem>
                            <ComboBoxItem>Medium</ComboBoxItem>
                            <ComboBoxItem>SemiBold</ComboBoxItem>
                            <ComboBoxItem>Bold</ComboBoxItem>
                            <ComboBoxItem>Black</ComboBoxItem>
                        </ComboBox>
                    </StackPanel>
                </Grid>

                <!-- Font Size -->
                <TextBlock Text="Size" Style="{StaticResource SectionHeader}"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="80"/>
                    </Grid.ColumnDefinitions>

                    <Slider x:Name="FontSizeSlider"
                           Grid.Column="0"
                           Style="{StaticResource ModernSlider}"
                           Minimum="8"
                           Maximum="144"
                           Value="24"
                           ValueChanged="FontSizeSlider_ValueChanged"/>

                    <TextBox x:Name="FontSizeTextBox"
                            Grid.Column="1"
                            Text="24 pt"
                            Background="{StaticResource InputBgBrush}"
                            Foreground="{StaticResource TextBrush}"
                            BorderThickness="0"
                            Height="35"
                            VerticalContentAlignment="Center"
                            HorizontalContentAlignment="Center"
                            Margin="5,0,0,0"
                            TextChanged="FontSizeTextBox_TextChanged"/>
                </Grid>

                <!-- Text Alignment -->
                <TextBlock Text="Alignment" Style="{StaticResource SectionHeader}"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <RadioButton x:Name="AlignLeftBtn"
                                Grid.Column="0"
                                Style="{StaticResource TouchRadioButton}"
                                GroupName="Alignment"
                                IsChecked="True"
                                Click="Alignment_Click">
                        <TextBlock Text="&#xE8E4;" FontFamily="Segoe MDL2 Assets"/>
                    </RadioButton>

                    <RadioButton x:Name="AlignCenterBtn"
                                Grid.Column="1"
                                Style="{StaticResource TouchRadioButton}"
                                GroupName="Alignment"
                                Click="Alignment_Click">
                        <TextBlock Text="&#xE8E3;" FontFamily="Segoe MDL2 Assets"/>
                    </RadioButton>

                    <RadioButton x:Name="AlignRightBtn"
                                Grid.Column="2"
                                Style="{StaticResource TouchRadioButton}"
                                GroupName="Alignment"
                                Click="Alignment_Click">
                        <TextBlock Text="&#xE8E2;" FontFamily="Segoe MDL2 Assets"/>
                    </RadioButton>

                    <RadioButton x:Name="AlignJustifyBtn"
                                Grid.Column="3"
                                Style="{StaticResource TouchRadioButton}"
                                GroupName="Alignment"
                                Click="Alignment_Click">
                        <TextBlock Text="&#xE8E1;" FontFamily="Segoe MDL2 Assets"/>
                    </RadioButton>
                </Grid>

                <!-- Text Decoration -->
                <TextBlock Text="Decoration" Style="{StaticResource SectionHeader}"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <ToggleButton x:Name="BoldBtn"
                                 Grid.Column="0"
                                 Style="{StaticResource TouchButton}"
                                 Click="Bold_Click">
                        <TextBlock Text="B" FontWeight="Bold"/>
                    </ToggleButton>

                    <ToggleButton x:Name="ItalicBtn"
                                 Grid.Column="1"
                                 Style="{StaticResource TouchButton}"
                                 Click="Italic_Click">
                        <TextBlock Text="I" FontStyle="Italic"/>
                    </ToggleButton>

                    <ToggleButton x:Name="UnderlineBtn"
                                 Grid.Column="2"
                                 Style="{StaticResource TouchButton}"
                                 Click="Underline_Click">
                        <TextBlock Text="U" TextDecorations="Underline"/>
                    </ToggleButton>
                </Grid>

                <!-- Line Height -->
                <TextBlock Text="Line Height" Style="{StaticResource SectionHeader}"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="80"/>
                    </Grid.ColumnDefinitions>

                    <Slider x:Name="LineHeightSlider"
                           Grid.Column="0"
                           Style="{StaticResource ModernSlider}"
                           Minimum="0.5"
                           Maximum="3"
                           Value="1.2"
                           ValueChanged="LineHeightSlider_ValueChanged"/>

                    <TextBlock x:Name="LineHeightText"
                              Grid.Column="1"
                              Text="1.2"
                              Background="{StaticResource InputBgBrush}"
                              Foreground="{StaticResource TextBrush}"
                              Height="35"
                              VerticalAlignment="Center"
                              HorizontalAlignment="Center"
                              Padding="10,8"
                              Margin="5,0,0,0"/>
                </Grid>

                <!-- Letter Spacing -->
                <TextBlock Text="Letter Spacing" Style="{StaticResource SectionHeader}"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="80"/>
                    </Grid.ColumnDefinitions>

                    <Slider x:Name="LetterSpacingSlider"
                           Grid.Column="0"
                           Style="{StaticResource ModernSlider}"
                           Minimum="-5"
                           Maximum="20"
                           Value="0"
                           ValueChanged="LetterSpacingSlider_ValueChanged"/>

                    <TextBlock x:Name="LetterSpacingText"
                              Grid.Column="1"
                              Text="0 px"
                              Background="{StaticResource InputBgBrush}"
                              Foreground="{StaticResource TextBrush}"
                              Height="35"
                              VerticalAlignment="Center"
                              HorizontalAlignment="Center"
                              Padding="10,8"
                              Margin="5,0,0,0"/>
                </Grid>

                <!-- Text Color -->
                <TextBlock Text="Text Color" Style="{StaticResource SectionHeader}"/>
                <local:InlineColorPicker x:Name="TextColorPicker"
                                        HorizontalAlignment="Left"
                                        ColorChanged="TextColorPicker_ColorChanged"/>


                <!-- Shadow -->
                <TextBlock Text="Shadow" Style="{StaticResource SectionHeader}"/>
                <CheckBox x:Name="TextShadowCheckBox"
                         Content="Enable Shadow"
                         Foreground="{StaticResource TextBrush}"
                         Margin="0,5"
                         Checked="TextShadow_Changed"
                         Unchecked="TextShadow_Changed"/>

                <StackPanel x:Name="ShadowOptionsPanel"
                           Visibility="Collapsed">
                    <!-- Shadow X Offset -->
                    <TextBlock Text="X Offset"
                              Foreground="{StaticResource SubtextBrush}"
                              FontSize="11"
                              Margin="0,5,0,2"/>
                    <Slider x:Name="ShadowXSlider"
                           Style="{StaticResource ModernSlider}"
                           Minimum="-20"
                           Maximum="20"
                           Value="2"
                           ValueChanged="Shadow_Changed"/>

                    <!-- Shadow Y Offset -->
                    <TextBlock Text="Y Offset"
                              Foreground="{StaticResource SubtextBrush}"
                              FontSize="11"
                              Margin="0,5,0,2"/>
                    <Slider x:Name="ShadowYSlider"
                           Style="{StaticResource ModernSlider}"
                           Minimum="-20"
                           Maximum="20"
                           Value="2"
                           ValueChanged="Shadow_Changed"/>

                    <!-- Shadow Blur -->
                    <TextBlock Text="Blur Radius"
                              Foreground="{StaticResource SubtextBrush}"
                              FontSize="11"
                              Margin="0,5,0,2"/>
                    <Slider x:Name="ShadowBlurSlider"
                           Style="{StaticResource ModernSlider}"
                           Minimum="0"
                           Maximum="20"
                           Value="5"
                           ValueChanged="Shadow_Changed"/>

                    <!-- Shadow Color -->
                    <TextBlock Text="Shadow Color"
                              Foreground="{StaticResource SubtextBrush}"
                              FontSize="11"
                              Margin="0,5,0,2"/>
                    <local:InlineColorPicker x:Name="ShadowColorPicker"
                                            HorizontalAlignment="Left"
                                            ColorChanged="ShadowColorPicker_ColorChanged"/>
                </StackPanel>

                <!-- Text Transform -->
                <TextBlock Text="Text Transform" Style="{StaticResource SectionHeader}"/>
                <ComboBox x:Name="TextTransformCombo"
                         Style="{StaticResource ModernComboBox}"
                         SelectionChanged="TextTransform_Changed">
                    <ComboBoxItem>None</ComboBoxItem>
                    <ComboBoxItem>UPPERCASE</ComboBoxItem>
                    <ComboBoxItem>lowercase</ComboBoxItem>
                    <ComboBoxItem>Capitalize</ComboBoxItem>
                </ComboBox>

                <!-- Orientation -->
                <TextBlock Text="Orientation" Style="{StaticResource SectionHeader}"/>
                <StackPanel Orientation="Vertical">
                    <CheckBox x:Name="VerticalTextCheckBox"
                             Content="Rotate 90Â°"
                             Foreground="{StaticResource TextBrush}"
                             Margin="0,4,0,4"
                             Checked="VerticalText_Changed"
                             Unchecked="VerticalText_Changed"/>
                    <CheckBox x:Name="VerticalStackCheckBox"
                             Content="Stack characters"
                             Foreground="{StaticResource TextBrush}"
                             Margin="0,0,0,8"
                             Checked="VerticalStack_Changed"
                             Unchecked="VerticalStack_Changed"/>
                </StackPanel>

                <!-- OpenType Features -->
                <TextBlock Text="OpenType Features" Style="{StaticResource SectionHeader}"/>
                <WrapPanel>
                    <CheckBox x:Name="LigaturesCheckBox"
                             Content="Ligatures"
                             Foreground="{StaticResource TextBrush}"
                             Margin="0,2,15,2"
                             Checked="OpenTypeFeature_Changed"
                             Unchecked="OpenTypeFeature_Changed"/>

                    <CheckBox x:Name="KerningCheckBox"
                             Content="Kerning"
                             Foreground="{StaticResource TextBrush}"
                             Margin="0,2,15,2"
                             IsChecked="True"
                             Checked="OpenTypeFeature_Changed"
                             Unchecked="OpenTypeFeature_Changed"/>

                    <CheckBox x:Name="SmallCapsCheckBox"
                             Content="Small Caps"
                             Foreground="{StaticResource TextBrush}"
                             Margin="0,2,15,2"
                             Checked="OpenTypeFeature_Changed"
                             Unchecked="OpenTypeFeature_Changed"/>
                </WrapPanel>

                <!-- Character Panel Button -->
                <Button x:Name="CharacterPanelBtn"
                       Content="Special Characters..."
                       Height="40"
                       Background="{StaticResource AccentBrush}"
                       Foreground="White"
                       BorderThickness="0"
                       FontSize="14"
                       Margin="0,20,0,10"
                       Click="CharacterPanel_Click"/>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
